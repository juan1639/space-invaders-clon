var e=Object.defineProperty,t=(t,s,i)=>(((t,s,i)=>{s in t?e(t,s,{enumerable:!0,configurable:!0,writable:!0,value:i}):t[s]=i})(t,"symbol"!=typeof s?s+"":s,i),i);import{p as s}from"./phaser-cxBNu8M8.js";!function(){const e=document.createElement("link").relList;if(!(e&&e.supports&&e.supports("modulepreload"))){for(const e of document.querySelectorAll('link[rel="modulepreload"]'))t(e);new MutationObserver((e=>{for(const s of e)if("childList"===s.type)for(const e of s.addedNodes)"LINK"===e.tagName&&"modulepreload"===e.rel&&t(e)})).observe(document,{childList:!0,subtree:!0})}function t(e){if(e.ep)return;e.ep=!0;const t=function(e){const t={};return e.integrity&&(t.integrity=e.integrity),e.referrerPolicy&&(t.referrerPolicy=e.referrerPolicy),"use-credentials"===e.crossOrigin?t.credentials="include":"anonymous"===e.crossOrigin?t.credentials="omit":t.credentials="same-origin",t}(e);fetch(e.href,t)}}();const i=class e{static isNivelSuperado(){return e.nivelSuperado}static isGameOver(){return e.gameOver}static getPuntos(){return e.puntos}static getNivel(){return e.nivel}static getRecord(){return e.hi}static getVidas(){return e.vidas}static getIncGodownInvaders(){return e.incGodownInvaders}static setNivelSuperado(t){e.nivelSuperado=t}static setGameOver(t){e.gameOver=t}static setPuntos(t){e.puntos=t}static setNivel(t){e.nivel=t}static setRecord(t){e.hi=t}static setVidas(t){e.vidas=t}};t(i,"controlElegido",{mobile:!1,teclado:!0}),t(i,"screen",{width:800,height:600}),t(i,"nivelSuperado",!1),t(i,"gameOver",!1),t(i,"puntos",0),t(i,"nivel",1),t(i,"hi",115400),t(i,"vidas",3),t(i,"jugador",{posIniX:Math.floor(i.screen.width/2),posIniY:Math.floor(i.screen.height/1.05),velX:520,acelX:500,velY:0}),t(i,"disparo",{NRO_MAX_DISPAROS:3,VelY:-500}),t(i,"disparoEnemigo",{NRO_MAX_DISPAROS:19,velY:100,MIN_INTENSIDAD:740,MAX_INTENSIDAD:200}),t(i,"incGodownInvaders",[2,2,4,5,8,10,12,15,18,20,22,25,28,30,30,30,30,30,30,30,30]),t(i,"coloresInvaders",{rojo:16720401,verde:1162188,amarillo:15662848,disparo:{naranja:13408529}}),t(i,"explosionInvaders",null),t(i,"showBonus",null),t(i,"nodriza",{aparecer:15e3,posIniX:-100,posIniY:50,posIniXRight:i.screen.width+100,velX:150}),t(i,"defensas",[[Math.floor(i.screen.width/8),Math.floor(i.screen.height/1.2),10,4,8,8],[Math.floor(i.screen.width/2.7),Math.floor(i.screen.height/1.2),10,4,8,8],[Math.floor(i.screen.width/1.7),Math.floor(i.screen.height/1.2),10,4,8,8],[Math.floor(i.screen.width/1.2),Math.floor(i.screen.height/1.2),10,4,8,8]]),t(i,"pausas",{revivir:4e3,invisible:3e3,showBonus:3500,duracionExplosion:{jugador:1e3,enemigo:400}}),t(i,"depth",{fondo:0,disparoEnemigo:10,disparo:20,jugador:40,enemigo:50,explosiones:60,marcadores:110,textos:120,mobileControls:150});let o=i;class a{constructor(e,t){this.relatedScene=e,this.datos=t}create(){const{x:e,y:t,txt:s,size:i,color:o,style:a,stroke:n,sizeStroke:r,shadowOsx:l,shadowOsy:h,shadowColor:d,bool1:c,bool2:g,origin:p,elastic:u,dura:m}=this.datos;this.texto=this.relatedScene.add.text(e,t,s,{fontSize:i+"px",fill:o,fontFamily:"verdana, arial, sans-serif",fontStyle:a}),this.texto.setOrigin(p[0],p[1]),this.texto.setStroke(n,r),this.texto.setShadow(l,h,d,2,c,g),this.elastic(s,u,m),console.log(this.texto)}elastic(e,t,s){s>0&&this.relatedScene.tweens.add({targets:this.texto,y:t,ease:"Elastic",duration:s})}get(){return this.texto}}class n extends s.Scene{constructor(){super("Boot")}init(){this.txt=new a(this,{x:Math.floor(this.sys.game.config.width/2),y:Math.floor(this.sys.game.config.height/2),txt:" Touch screen or \n \n click to start... ",size:60,color:"#ffa",style:"bold",stroke:"#1e9",sizeStroke:16,shadowOsx:2,shadowOsy:2,shadowColor:"#111",bool1:!1,bool2:!0,origin:[.5,.5],elastic:!1,dura:0})}preload(){this.load.image("fondo","assets/img/fondo-nebulosa-800x600.png")}create(){this.add.image(0,0,"fondo").setOrigin(0,0),this.txt.create(),this.input.on("pointerdown",(()=>this.scene.start("Preloader"))),console.log(this.txt)}}function r(e,t){e.setActive(!0).setVisible(!0),e.enableBody(!0,t.x,t.y+Math.floor(t.body.height/2),!0,!0),e.setVelocityY(o.disparoEnemigo.velY+50*o.getNivel()),e.setScale(1,2).setAlpha(1).setDepth(o.depth.disparoEnemigo),e.setTint(o.coloresInvaders.disparo.naranja)}function l(e,t){t.tweens.add({targets:e,angle:360,duration:300,yoyo:!0})}function h(e,t){console.log("colision...jugador-enemigo"),console.log(t),b(this,t),y(t.x,t.y,"particula-tint",{min:120,max:180},{min:o.pausas.duracionExplosion.enemigo,max:o.pausas.duracionExplosion.enemigo+300},{start:.6,end:0},t.tint,null,!1,this),y(e.x,e.y,"particula-tint",{min:120,max:200},{min:1500,max:2e3},{start:.8,end:0},new Phaser.Display.Color(Phaser.Math.Between(0,125),Phaser.Math.Between(125,255),0).color,null,!1,this),o.getVidas()>0&&setTimeout((()=>{e.setActive(!0).setVisible(!0).setAlpha(.1),e.enableBody(!0,o.jugador.posIniX,o.jugador.posIniY,!0,!0),this.tweens.add({targets:e,alpha:1,duration:o.pausas.invisible})}),o.pausas.revivir),v(t),this.marcador.update(0,o.getPuntos()),t.setActive(!1).setVisible(!1).disableBody(!0,!0),e.setActive(!1).setVisible(!1).disableBody(!0,!0)}function d(e,t){return!(e.alpha<1)}function c(e,t){console.log("colision...disparo-enemigo"),console.log(e),x(this.sonidoExplosion,!1,.7),b(this,e),y(e.x,e.y,"particula-tint",{min:120,max:180},{min:o.pausas.duracionExplosion.enemigo,max:o.pausas.duracionExplosion.enemigo+500},{start:.7,end:0},e.tint,null,!1,this),v(e),this.marcador.update(0,o.getPuntos()),t.setActive(!1).setVisible(!1).setX(-9999),e.setActive(!1).setVisible(!1).disableBody(!0,!0)}function g(e,t){console.log("colision...disparoEnemigo-jugador"),console.log(e),x(this.sonidoNaveExplota,!1,.8),y(e.x,e.y,"particula-tint",{min:120,max:180},{min:o.pausas.duracionExplosion.jugador,max:o.pausas.duracionExplosion.jugador+500},{start:.8,end:0},new Phaser.Display.Color(Phaser.Math.Between(0,125),Phaser.Math.Between(125,255),0).color,null,!1,this),o.getVidas()>0&&setTimeout((()=>{e.setActive(!0).setVisible(!0).setAlpha(.1),e.enableBody(!0,o.jugador.posIniX,o.jugador.posIniY,!0,!0),this.tweens.add({targets:e,alpha:1,duration:o.pausas.invisible})}),o.pausas.revivir),function(){const e=o.getVidas()-1;o.setVidas(e)}(),o.getVidas()>=0?this.jugadorSV.get().getChildren()[o.getVidas()].setVisible(!1):o.setGameOver(!0),t.setActive(!1).setVisible(!1).setX(-8888),e.setActive(!1).setVisible(!1).disableBody(!0,!0)}function p(e,t){return!(e.alpha<1)}function u(e,t){var s;console.log("colision...disparo-nodriza"),console.log(e),x(this.sonidoBonusNodriza,!1,.9),s=e,o.showBonus=new a(this,{x:s.x,y:s.y+25,txt:s.getData("puntos").toString(),size:55,color:"#ffa",style:"bold",stroke:"#f21",sizeStroke:16,shadowOsx:2,shadowOsy:2,shadowColor:"#111",bool1:!1,bool2:!0,origin:[.5,.5],elastic:!1,dura:0}),o.showBonus.create(),o.showBonus.get().setScale(1.2).setAlpha(1),this.tweens.add({targets:o.showBonus.get(),alpha:0,scale:0,duration:o.pausas.showBonus}),y(e.x,e.y,"particula-tint",{min:120,max:250},{min:o.pausas.duracionExplosion.enemigo,max:o.pausas.duracionExplosion.enemigo+500},{start:.9,end:0},new Phaser.Display.Color(Phaser.Math.Between(200,255),Phaser.Math.Between(50,255),0).color,null,!1,this),v(e),this.marcador.update(0,o.getPuntos()),t.setActive(!1).setVisible(!1).setX(-9999),e.setActive(!1).setVisible(!1).disableBody(!0,!0)}function m(e,t){console.log("colision disparoEnemigo-defensas"),y(t.x,t.y,"particula-tint",{min:100,max:160},{min:o.pausas.duracionExplosion.enemigo,max:o.pausas.duracionExplosion.enemigo+500},{start:.5,end:0},new Phaser.Display.Color(Phaser.Math.Between(170,180),Phaser.Math.Between(155,195),73).color,null,!1,this),t.setActive(!1).setVisible(!1).setX(-8888),e.setActive(!1).setVisible(!1).disableBody(!0,!0)}function f(e,t){console.log("colision disparo-defensas"),y(t.x,t.y,"particula-tint",{min:100,max:160},{min:o.pausas.duracionExplosion.enemigo,max:o.pausas.duracionExplosion.enemigo+500},{start:.5,end:0},new Phaser.Display.Color(Phaser.Math.Between(170,180),Phaser.Math.Between(155,195),73).color,null,!1,this),t.setActive(!1).setVisible(!1).setX(-8888),e.setActive(!1).setVisible(!1).disableBody(!0,!0)}function y(e,t,s,i,a,n,r,l,h,d){const c=d.add.particles(e,t,s,{speed:i,lifespan:a,scale:n,tint:r,blendMode:"ADD"});d.time.delayedCall(o.pausas.duracionExplosion.enemigo,(()=>c.stop())),h&&c.startFollow(l)}function b(e,t){o.explosionInvaders=e.add.image(t.x,t.y,"explosion"),o.explosionInvaders.setTint(t.tint).setScale(2).setAlpha(1),e.tweens.add({targets:o.explosionInvaders,alpha:0,duration:o.pausas.duracionExplosion.enemigo-100})}function v(e){const t=o.getPuntos()+e.getData("puntos");o.setPuntos(t)}function x(e,t,s){e.volume=s,e.loop=t,e.play()}class w{constructor(e){this.relatedScene=e}create(){this.jugador=this.relatedScene.physics.add.sprite(o.jugador.posIniX,o.jugador.posIniY,"jugador"),this.jugador.setScale(3),this.jugador.setAlpha(1),this.jugador.setData("posIni",[o.jugador.posIniX,o.jugador.posIniY]),this.jugador.setData("vel-x",o.jugador.velX),this.jugador.setData("acel-x",o.jugador.acelX),this.jugador.setData("vel-y",o.jugador.velY),this.jugador.setCollideWorldBounds(!0),this.jugador.setBounce(.2),this.controles=this.relatedScene.input.keyboard.createCursorKeys(),console.log(this.controles)}update(){this.controles.left.isDown||this.relatedScene.crucetaleft.isDown?this.jugador.setVelocityX(-this.jugador.getData("vel-x")):this.controles.right.isDown||this.relatedScene.crucetaright.isDown?this.jugador.setVelocityX(this.jugador.getData("vel-x")):this.jugador.setVelocityX(0)}get(){return this.jugador}}const S=class e{constructor(e){this.relatedScene=e}create(){this.jugadorSV=this.relatedScene.add.group({key:"jugador",setXY:{x:e.xAbsolute,y:Math.floor(e.alto/2),stepX:e.ancho},repeat:o.getVidas()-1}),this.jugadorSV.children.iterate((e=>{e.setScale(1),e.setAlpha(.9)})),console.log(this.jugadorSV)}get(){return this.jugadorSV}};t(S,"xAbsolute",240),t(S,"ancho",32),t(S,"alto",28);let A=S;class M{constructor(e){this.relatedScene=e}create(){this.disparo=this.relatedScene.physics.add.group({key:"disparo",setXY:{x:-9999,y:9999,stepX:150},repeat:o.disparo.NRO_MAX_DISPAROS-1}),this.relatedScene.tweens.add({targets:this.disparo.getChildren(),tint:new Phaser.Display.Color(0,Phaser.Math.Between(90,200),Phaser.Math.Between(90,120)).color,duration:300,repeat:-1}),this.disparo.getChildren().forEach((e=>{e.setScale(2,3).setActive(!1).setVisible(!1)})),this.cadencia={allowNext:200,flag:0},console.log(this.disparo)}update(){this.disparo.children.iterate((e=>{e.y<0&&e.setActive(!1).setVisible(!1).setX(-9999)}))}get(){return this.disparo}}class O{constructor(e,t){this.relatedScene=e,this.args=t}create(){const{left:e,top:t,vx:s,vy:i,each:a,numberAliensHor:n,numberAliensVer:r,gapX:l,gapY:h,marginLeft:d,marginTop:c}=this.args;this.formacion={x:e,y:t,velX:s,velY:i,totalAliens:n*r,width:n*l-l},this.enemigos=this.relatedScene.physics.add.group({key:["invader1","invader2","invader3"],frameQuantity:a,gridAlign:{width:n,height:r,cellWidth:l,cellHeight:h,x:d,y:c}}),this.enemigos.getChildren().forEach(((e,t)=>{e.setAngle(355).setScale(2).setDepth(o.depth.enemigo),e.setData("puntos",400-5*t)})),this.relatedScene.tweens.add({targets:this.enemigos.getChildren(),angle:5,yoyo:!0,duration:1e3,repeat:-1}),this.crea_anims(o.getNivel()),console.log(this.enemigos.getChildren())}update(){if(this.formacion.x+=this.formacion.velX,this.formacion.x+this.formacion.width>=this.relatedScene.sys.game.config.width&&this.formacion.velX>0||this.formacion.x<=0&&this.formacion.velX<0){this.formacion.velX=-this.formacion.velX;const e=this.formacion.velY*o.getIncGodownInvaders()[o.getNivel()];Phaser.Actions.IncY(this.enemigos.getChildren(),e)}Phaser.Actions.IncX(this.enemigos.getChildren(),this.formacion.velX)}crea_anims(e){const t=[["enemys-anim","invader1"],["enemys2-anim","invader2"],["enemys3-anim","invader3"]];t.forEach((e=>{this.relatedScene.anims.create({key:e[0],frames:this.relatedScene.anims.generateFrameNumbers(e[1],{frames:[0,1]}),duration:600,yoyo:!0,repeat:-1})})),this.enemigos.children.iterate(((e,s)=>{s<Math.floor(this.formacion.totalAliens/t.length)?(e.play("enemys-anim"),e.setTint(o.coloresInvaders.rojo)):s<2*Math.floor(this.formacion.totalAliens/t.length)?(e.play("enemys2-anim"),e.setTint(o.coloresInvaders.verde)):s<3*Math.floor(this.formacion.totalAliens/t.length)&&(e.play("enemys3-anim"),e.setTint(o.coloresInvaders.amarillo))}))}get_posicion(e){const t=Math.floor(e/O.array_enemigos[0].length);return[e-t*O.array_enemigos[0].length,t]}get(){return this.enemigos}}class D{constructor(e){this.relatedScene=e}create(){this.disparoenemigo=this.relatedScene.physics.add.group({key:"disparo-ene",setXY:{x:-8888,y:8888,stepX:150},repeat:o.disparoEnemigo.NRO_MAX_DISPAROS}),this.disparoenemigo.getChildren().forEach((e=>{e.setScale(2),e.setActive(!1).setVisible(!1).disableBody(!0,!0)}));const e=this.get_intensidadDisparos();this.cadencia={disparo:e,bandera:0},console.log(this.disparoenemigo)}update(){this.disparoenemigo.children.iterate((e=>{e.y>this.relatedScene.sys.game.config.height&&e.setActive(!1).setVisible(!1).disableBody(!0,!0)}))}get_intensidadDisparos(){let e=o.disparoEnemigo.MIN_INTENSIDAD-40*o.getNivel();return e<o.disparoEnemigo.MAX_INTENSIDAD?o.disparoEnemigo.MAX_INTENSIDAD:e}get(){return this.disparoenemigo}}const E=class e{constructor(e){this.relatedScene=e}create(){this.explosion=this.relatedScene.physics.add.group({key:"explosion",setXY:{x:-5555,y:-5555,stepX:100},repeat:e.NRO_EXPLOSIONES}),this.relatedScene.anims.create({key:"explosion-anim",frames:this.relatedScene.anims.generateFrameNumbers("explosion",{frames:[1,2,3]}),frameRate:15,repeat:-1}),this.explosion.children.iterate((e=>{e.setScale(2),e.setActive(!1).setVisible(!1),e.play("explosion-anim")})),console.log(this.explosion)}update(){}get(){return this.explosion}};t(E,"NRO_EXPLOSIONES",9),t(E,"DURACION_EXPLO",1e3);let X=E;const I=class e{constructor(e){this.relatedScene=e}create(){this.particulas=this.relatedScene.physics.add.group({key:"particula",setXY:{x:-5555,y:-5555,stepX:100},repeat:e.NRO_PARTICULAS_TOTAL}),this.particulas.children.iterate((e=>{e.setTint(new Phaser.Display.Color(255,Phaser.Math.Between(125,255),0).color),e.setScale(Phaser.Math.FloatBetween(.4,1.3)),e.setActive(!1).setVisible(!1)})),console.log(this.particulas)}update(){}get(){return this.particulas}};t(I,"NRO_PARTICULAS",9),t(I,"NRO_PARTICULAS_TOTAL",15*I.NRO_PARTICULAS),t(I,"DURACION_PARTICULAS",1250);let j=I;class N{constructor(e){this.relatedScene=e}create(){this.marcadores=this.relatedScene.add.group();const e=this.relatedScene.sys.game.config.width;this.relatedScene.sys.game.config.height,this.args=[[" Score: ",24,"#fff","#2ef",7,0,0,o.getPuntos()],[" Level: ",24,"#ff7","#2ef",7,Math.floor(e/2.2),0,o.getNivel()],[" Hi: ",24,"#fff","#2ef",7,Math.floor(e/1.5),0,o.getRecord()]],this.args.forEach(((e,t)=>{let s=this.relatedScene.add.text(e[5],e[6],e[0]+e[7],{fontSize:e[1]+"px",fill:e[2],fontFamily:"verdana, arial, sans-serif",shadow:{offsetX:1,offsetY:1,color:e[3],blur:e[4],fill:!0}});this.marcadores.add(s)})),console.log(this.marcadores)}update(e,t){this.marcadores.getChildren()[e].setText(this.args[e][0]+t)}get(){return this.marcadores}}class P{constructor(e){this.relatedScene=e}create(e,t){const s=this.relatedScene.sys.game.config.width,i=this.relatedScene.sys.game.config.height;this.boton=this.relatedScene.add.sprite(Math.floor(s/2),Math.floor(i/1.6),"boton-nueva-partida").setInteractive(),this.boton.setScale(.6).setAngle(1).setDepth(30),this.boton.on("pointerover",(()=>{this.boton.setScale(.7)})),this.boton.on("pointerout",(()=>{this.boton.setScale(.6)})),this.boton.on("pointerdown",(t=>{this.relatedScene.scene.start(e),console.log(t)})),this.relatedScene.tweens.add({targets:this.boton,angle:359,ease:"Elastic",yoyo:!0,hold:2e3,duration:3e3,repeat:-1})}get(){return this.boton}}class V{constructor(e,t){this.relatedScene=e,this.args=t}create(){const{x:e,y:t,id:s,scX:i,scY:o,ang:a}=this.args;this.boton=this.relatedScene.add.image(e,t,s).setInteractive(),this.boton.setScale(i,o),this.boton.setAngle(a).setFrame(0).setDepth(50),this.boton.setX(e).setY(t+Math.floor(this.boton.height/2)),this.boton.on("pointerover",(()=>{this.boton.setScale(i+.1,o+.1)})),this.boton.on("pointerout",(()=>{this.boton.setScale(i,o)})),this.boton.on("pointerdown",(()=>{this.relatedScene.scale.isFullscreen?this.relatedScene.scale.stopFullscreen():this.relatedScene.scale.startFullscreen()}))}}class z{constructor(e,t){this.relatedScene=e,this.args=t}create(){const{left:e,top:t,frame:s,scale:i,texto:n,id:r}=this.args;this.radiobutton=this.relatedScene.add.sprite(e,t,"radio-buttons").setInteractive(),this.radiobutton.setOrigin(0,.5).setScale(i).setDepth(o.depth.textos).setFrame(s),this.radiobutton.setData("id",r),this.txt=new a(this.relatedScene,{x:e+60,y:t,txt:n,size:45,color:"#ffa",style:"bold",stroke:"#f71",sizeStroke:16,shadowOsx:2,shadowOsy:2,shadowColor:"#111",bool1:!1,bool2:!0,origin:[0,.5],elastic:!1,dura:0}),this.txt.create(),this.radiobutton.on("pointerover",(()=>{this.txt.get().setScale(i+.1),this.radiobutton.setScale(i+.1)})),this.radiobutton.on("pointerout",(()=>{this.txt.get().setScale(i),this.radiobutton.setScale(i)})),this.radiobutton.on("pointerdown",(e=>{this.relatedScene.radiobuttons.forEach((e=>e.get().setFrame(0))),this.radiobutton.setFrame(1),Object.keys(o.controlElegido).forEach((e=>{o.controlElegido[e]=!1})),o.controlElegido[this.radiobutton.getData("id")]=!0,console.log(o.controlElegido.mobile,o.controlElegido.teclado)}))}get(){return this.radiobutton}}class C{constructor(e){this.relatedScene=e}create(){const e=this.relatedScene.sys.game.config.width,t=this.relatedScene.sys.game.config.height;this.boton=this.relatedScene.add.image(e-100,t-90,"boton-fire-joystick").setInteractive(),this.boton.setScale(2).setDepth(o.depth.mobileControls),this.isDown=!1,this.boton.on("pointerover",(()=>{this.boton.setScale(2.07)})),this.boton.on("pointerout",(()=>{this.boton.setScale(2)})),this.boton.on("pointerdown",(()=>{this.isDown=!0})),this.boton.on("pointerup",(()=>{this.isDown=!1}))}get(){return this.boton}}class k{constructor(e,t){this.relatedScene=e,this.direccion=t}create(){this.relatedScene.sys.game.config.width;const e=this.relatedScene.sys.game.config.height;this.boton=this.relatedScene.add.image(this.direccion.x,e-this.direccion.y,this.direccion.id).setInteractive(),this.boton.setScale(2.7,2.3).setDepth(o.depth.mobileControls),this.isDown=!1,this.boton.on("pointerover",(()=>{this.boton.setScale(2.8,2.4)})),this.boton.on("pointerout",(()=>{this.boton.setScale(2.7,2.3)})),this.boton.on("pointerdown",(()=>{this.isDown=!0})),this.boton.on("pointerup",(()=>{this.isDown=!1}))}get(){return this.boton}}class _{constructor(e,t){this.relatedScene=e,this.activa=t}create(){this.activa=!0;const e=Phaser.Math.Between(0,10);this.velX=o.nodriza.velX+50*o.getNivel();let t=o.nodriza.posIniX;e<5&&(this.velX=-this.velX,t=o.nodriza.posIniXRight),this.nodriza=this.relatedScene.physics.add.sprite(t,o.nodriza.posIniY,"nodriza-ssheet"),this.nodriza.setScale(2).setVelocityX(this.velX),this.nodriza.setData("puntos",5e3*o.getNivel()),this.relatedScene.anims.create({key:"nodriza-anims",frames:this.relatedScene.anims.generateFrameNumbers("nodriza-ssheet",{frames:[0,1,2,3,4]}),duration:2e3,yoyo:!0,repeat:-1}),this.nodriza.play("nodriza-anims")}update(){(this.nodriza.x>2*this.relatedScene.sys.game.config.width&&this.velX>0||this.nodriza.x<-this.relatedScene.sys.game.config.width&&this.velX<0)&&(this.velX=-this.velX,this.nodriza.setVelocityX(this.velX))}get(){return this.nodriza}}class B{constructor(e){this.relatedScene=e}create(){this.defensas=this.relatedScene.physics.add.group();for(let e=0;e<o.defensas.length;e++){const t=o.defensas[e][0],s=o.defensas[e][1],i=o.defensas[e][3],a=o.defensas[e][2],n=o.defensas[e][4],r=o.defensas[e][5];for(let e=0;e<i;e++)for(let i=0;i<a;i++)this.defensas.create(t+n*i,s+r*e,"defensas")}this.defensas.children.iterate(((e,t)=>{e.setScale(2).setDepth(o.depth.enemigo)})),console.log(this.defensas)}update(){}get(){return this.defensas}}class R extends s.Scene{constructor(){super("Game")}init(){o.setNivelSuperado(!1),this.jugador=new w(this),this.jugadorSV=new A(this),this.disparo=new M(this),this.enemigo=new O(this,{left:96,top:64,vx:1,vy:1,each:20,numberAliensHor:10,numberAliensVer:6,gapX:64,gapY:48,marginLeft:96,marginTop:64}),this.disparoenemigo=new D(this),this.nodriza=new _(this,!1),this.defensas=new B(this),this.explosion=new X(this),this.particulas=new j(this),this.marcador=new N(this),this.botonfullscreen=new V(this,{x:this.sys.game.config.width/1.1,y:0,id:"boton-fullscreen",scX:1,scY:1,ang:0}),this.botonfire=new C(this),this.crucetaleft=new k(this,{id:"cruceta-left",x:80,y:60}),this.crucetaright=new k(this,{id:"cruceta-right",x:290,y:60})}preload(){}create(){this.add.image(0,0,"fondo").setOrigin(0,0),this.set_sonidos(),x(this.sonidoAliensHere,!1,.9),this.botonfullscreen.create(),this.botonfire.create(),this.crucetaleft.create(),this.crucetaright.create(),this.hideMobileControls(),this.jugadorSV.create(),this.jugador.create(),this.disparo.create(),this.enemigo.create(),this.disparoenemigo.create(),this.defensas.create(),this.marcador.create(),this.add.timeline([{at:o.nodriza.aparecer,run:()=>{this.nodriza.create(),this.physics.add.collider(this.nodriza.get(),this.disparo.get(),u,null,this)}}]).play(),this.set_colliders()}update(){this.jugador.update(),this.disparo.update(),this.enemigo.update(),this.disparoenemigo.update(),this.nodriza.activa&&this.nodriza.update(),this.jugador.get().active&&this.jugador.get().visible&&function(e,t,s,i,a,n){if(e.controles.shift.isDown&&t.start("gameover"),(e.controles.space.isDown||s.isDown)&&i.now>a.cadencia.flag){console.log("disparo");let t=!1;a.get().getChildren().forEach((s=>{console.log(s.active),s.active||s.visible||t||(t=!0,s.setActive(!0).setVisible(!0),s.enableBody(!0,e.get().x,e.get().y-Math.floor(e.get().body.height/2),!0,!0),s.setVelocityY(o.disparo.VelY),x(n,!1,.8))})),a.cadencia.flag=i.now+a.cadencia.allowNext}}(this.jugador,this.scene,this.botonfire,this.time,this.disparo,this.sonidoDisparo),function(e){let t=!1;e.enemigo.get().children.iterate((s=>{s.x<e.jugador.get().x+e.jugador.get().width&&s.x+s.width>e.jugador.get().x&&s.body.enable?e.disparoenemigo.get().getChildren().forEach((i=>{!i.active&&!i.visible&&!t&&e.time.now>e.disparoenemigo.cadencia.bandera&&(t=!0,r(i,s),l(s,e),e.disparoenemigo.cadencia.bandera=e.time.now+e.disparoenemigo.cadencia.disparo,x(e.sonidoDisparoEnemigo,!1,.9))})):s.body.enable&&e.disparoenemigo.get().getChildren().forEach((i=>{Phaser.Math.Between(0,999)<9*o.getNivel()&&e.time.now>e.disparoenemigo.cadencia.bandera&&(t=!0,r(i,s),l(s,e),e.disparoenemigo.cadencia.bandera=e.time.now+e.disparoenemigo.cadencia.disparo,x(e.sonidoDisparoEnemigo,!1,.9))}))}))}(this),this.check_levelUp(),this.check_gameOver()}check_levelUp(){this.enemigo.get().countActive()<=0&&!o.isNivelSuperado()&&(o.setNivelSuperado(!0),this.txtNivelSuperado=new a(this,{x:Math.floor(this.sys.game.config.width/2),y:Math.floor(this.sys.game.config.height/3.5),txt:" Congratulations! ",size:70,color:"#ffa",style:"bold",stroke:"#1d2",sizeStroke:16,shadowOsx:2,shadowOsy:2,shadowColor:"#111111",bool1:!1,bool2:!0,origin:[.5,.5],elastic:!1,dura:0}),this.txtNivelSuperado.create(),this.txtNivelSuperado.get().setDepth(o.depth.textos).setAlpha(1),this.tweens.add({targets:this.txtNivelSuperado.get(),alpha:0,duration:2800}),this.add.timeline([{at:4e3,run:()=>this.scene.start("Congratulations")}]).play())}check_gameOver(){o.isGameOver()&&(o.setGameOver(!1),this.check_newRecord(),this.txtGameOver=new a(this,{x:Math.floor(this.sys.game.config.width/2),y:Math.floor(this.sys.game.config.height/1.6),txt:" Game Over ",size:80,color:"#ffa",style:"bold",stroke:"#1bc",sizeStroke:16,shadowOsx:2,shadowOsy:2,shadowColor:"#111",bool1:!1,bool2:!0,origin:[.5,.5],elastic:!1,dura:0}),this.txtGameOver.create(),this.txtGameOver.get().setScale(1).setAlpha(0),this.tweens.add({targets:this.txtGameOver.get(),alpha:1,duration:3800}),x(this.sonidoGameOverRetro,!1,.9),this.add.timeline([{at:2500,run:()=>x(this.sonidoGameOverRetro,!1,.9)},{at:3500,run:()=>x(this.sonidoGameOverRetro,!1,.9)},{at:7e3,run:()=>this.scene.start("PreGame")}]).play())}check_newRecord(){o.getPuntos()>=o.getRecord()&&(o.setRecord(o.getPuntos()),this.txtnewrecord=new a(this,{x:Math.floor(this.sys.game.config.width/2),y:Math.floor(this.sys.game.config.height/3),txt:" Enhorabuena! \n Nuevo Record! ",size:50,color:"#ff9",style:"bold",stroke:"#5f1",sizeStroke:16,shadowOsx:2,shadowOsy:2,shadowColor:"#111111",bool1:!1,bool2:!0,origin:[.5,.5],elastic:!1,dura:0}),this.txtnewrecord.create(),this.txtnewrecord.get().setDepth(o.depth.marcadores),this.tweens.add({targets:this.txtnewrecord.get(),scale:2.1,ease:"sine.out",duration:1e3,yoyo:!0,delay:500,repeat:-1,repeatDelay:3e3}))}set_sonidos(){this.sonidoDisparo=this.sound.add("disparo-jugador"),this.sonidoDisparoEnemigo=this.sound.add("disparo-enemigo"),this.sonidoAliensAtmos=this.sound.add("aliens-atmos"),this.sonidoAliensHere=this.sound.add("aliens-here"),this.sonidoExplosion=this.sound.add("explosion"),this.sonidoNaveExplota=this.sound.add("nave-explota"),this.sonidoGameOverRetro=this.sound.add("gameover-retro"),this.sonidoBonusNodriza=this.sound.add("bonus-nodriza")}hideMobileControls(){console.log(o.controlElegido),o.controlElegido.mobile||(this.botonfire.get().setVisible(!1),this.crucetaleft.get().setVisible(!1),this.crucetaright.get().setVisible(!1))}set_colliders(){this.physics.add.collider(this.enemigo.get(),this.disparo.get(),c,null,this),this.physics.add.overlap(this.enemigo.get(),this.jugador.get(),h,d,this),this.physics.add.overlap(this.disparoenemigo.get(),this.jugador.get(),g,p,this),this.physics.add.overlap(this.disparoenemigo.get(),this.defensas.get(),m,null,this),this.physics.add.overlap(this.disparo.get(),this.defensas.get(),f,null,this)}}class T extends s.Scene{constructor(){super("PreGame")}init(){o.setPuntos(0),o.setNivel(1),o.setVidas(3),o.setGameOver(!1),o.setNivelSuperado(!1),o.explosionInvaders=null,o.showBonus=null,o.controlElegido.mobile=!1,o.controlElegido.teclado=!0,this.botoninicio=new P(this),this.radiobuttons=[],this.radiobuttons.push(new z(this,{left:Math.floor(this.sys.game.config.width/15),top:Math.floor(this.sys.game.config.height/4),frame:1,scale:1,texto:" Keyboard cursors ",id:"teclado"})),this.radiobuttons.push(new z(this,{left:Math.floor(this.sys.game.config.width/15),top:Math.floor(this.sys.game.config.height/2.6),frame:0,scale:1,texto:" Mobile controls ",id:"mobile"}))}create(){this.add.image(0,0,"fondo").setOrigin(0,0),this.radiobuttons.forEach((e=>e.create())),this.botoninicio.create("Game",!1)}}class Y extends s.Scene{constructor(){super("MainMenu")}init(){this.botoninicio=new P(this),this.txt=new a(this,{x:Math.floor(this.sys.game.config.width/2),y:0,txt:" Retro Aliens ",size:100,color:"#ffa",style:"bold",stroke:"#1ca",sizeStroke:16,shadowOsx:2,shadowOsy:2,shadowColor:"#111",bool1:!1,bool2:!0,origin:[.5,.5],elastic:Math.floor(this.sys.game.config.height/4),dura:3e3})}preload(){}create(){this.sonidoAliensAtmos=this.sound.add("aliens-atmos"),this.add.image(0,0,"fondo").setOrigin(0,0),this.ovnis=this.add.image(this.sys.game.config.width/2,this.sys.game.config.height/1.6,"ufos-img"),this.txt.create(),this.tweens.add({targets:this.ovnis,scale:0,duration:59e3}),this.add.text(Math.floor(this.sys.game.config.width/4),Math.floor(this.sys.game.config.height/1.04),"Based on classic arcade game Space Invaders of 1978",{fontSize:"16px",color:"#ff1",align:"justify",fontFamily:"Arial"}),this.add.timeline([{at:1800,run:()=>{this.botoninicio.create("PreGame",!1)}}]).play(),x(this.sonidoAliensAtmos,!1,.9),console.log(this.txt)}}class G extends s.Scene{constructor(){super("Preloader")}init(){const e=this.sys.game.config.width,t=this.sys.game.config.height;this.load.image("fondo","assets/img/fondo-nebulosa-800x600.png"),this.add.image(0,0,"fondo").setOrigin(0,0),this.txt=new a(this,{x:Math.floor(e/2),y:Math.floor(t/3.5),txt:" Loading...",size:55,color:"#ffa",style:"bold",stroke:"#f91",sizeStroke:16,shadowOsx:2,shadowOsy:2,shadowColor:"#111",bool1:!1,bool2:!0,origin:[.5,.5],elastic:!1,dura:0}),this.txt.create(),this.add.rectangle(Math.floor(e/2),Math.floor(t/2),Math.floor(e/1.5),Math.floor(t/12)).setStrokeStyle(1,16772744);const s=this.add.rectangle(Math.floor(e/2)-Math.floor(e/3)+4,Math.floor(t/2),4,Math.floor(t/14),16750865);this.load.on("progress",(t=>{s.width=Math.floor(e/1.52)*t}))}preload(){this.load.setPath("assets"),this.load.image("fondo-nebulosa","./img/fondo-nebulosa-800x600.png"),this.load.image("ufos-img","./img/ufos-img.png"),this.load.image("boton-nueva-partida","./img/boton-start.png"),this.load.spritesheet("boton-fullscreen","./img/boton-fullscreen.png",{frameWidth:64,frameHeight:64}),this.load.spritesheet("radio-buttons","./img/radio-buttons-ssheet.png",{frameWidth:50,frameHeight:50}),this.load.image("boton-fire-joystick","./img/boton-fire-joystick.png"),this.load.image("cruceta-left","./img/left.png"),this.load.image("cruceta-right","./img/right.png"),this.load.image("explosion","./img/boom.png"),this.load.image("disparo-ene","./img/disparo-invader.png"),this.load.image("disparo","./img/bullet2.png"),this.load.image("explosion-obstaculo","./img/explode.png"),this.load.image("particula-tint","./img/particula-tint.png"),this.load.image("defensas","./img/muro-invaders.png"),this.load.image("nodriza","./img/mothership.png"),this.load.spritesheet("nodriza-ssheet","./img/mothership-ssheet.png",{frameWidth:48,frameHeight:21}),this.load.image("jugador","./img/ship.png");const e=[null,16,22,24];for(let t=1;t<4;t++)this.load.spritesheet(`invader${t}`,`./img/invader${t}.png`,{frameWidth:e[t],frameHeight:16});this.load.audio("disparo-jugador","./disparo-corto.mp3"),this.load.audio("disparo-enemigo","./disparo-enemigo.mp3"),this.load.audio("aliens-atmos","./alien-atmos-dark.mp3"),this.load.audio("aliens-here","./invaders-are-here.mp3"),this.load.audio("explosion","./explosion.wav"),this.load.audio("nave-explota","./navexplota.mp3"),this.load.audio("gameover-retro","./game-over-arcade-retro.mp3"),this.load.audio("bonus-nodriza","./level-passed.mp3")}create(){this.scene.start("MainMenu")}}class L extends Phaser.Scene{constructor(){super({key:"Congratulations"})}init(){this.botoninicio=new P(this)}create(){this.add.image(0,0,"fondo").setOrigin(0,0),this.incremento_nivel=o.getNivel()+1,o.setNivelSuperado(!1),this.sonido_intermision=this.sound.add("aliens-atmos"),this.txt=new a(this,{x:Math.floor(this.sys.game.config.width/2),y:Math.floor(this.sys.game.config.height/3.5),txt:" Level Up! ",size:86,color:"#ffa",style:"bold",stroke:"#1cb",sizeStroke:16,shadowOsx:2,shadowOsy:2,shadowColor:"#111111",bool1:!1,bool2:!0,origin:[.5,.5],elastic:!1,dura:0}),this.txt.create(),this.txt.get().setDepth(o.depth.textos).setAlpha(1),this.timeline=this.add.timeline([{at:3200,run:()=>{o.setNivel(this.incremento_nivel),this.botoninicio.create("Game",!1)}}]),this.timeline.play(),x(this.sonido_intermision,!1,.8),console.log(this.txt)}}const F={type:Phaser.AUTO,width:800,height:600,parent:"game-container",backgroundColor:"#655500",scale:{mode:Phaser.Scale.FIT,autoCenter:Phaser.Scale.CENTER_BOTH},physics:{default:"arcade",arcade:{debug:!1}},pixelArt:!0,scene:[n,G,Y,R,T,L]};new Phaser.Game(F);
